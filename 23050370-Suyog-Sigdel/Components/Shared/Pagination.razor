<div class="pagination">
    <button class="page-btn" @onclick="OnFirstPage" disabled="@(CurrentPage == 1 || TotalPages == 0)">
        <i class="fas fa-angle-double-left"></i>
    </button>
    <button class="page-btn" @onclick="OnPreviousPage" disabled="@(CurrentPage == 1 || TotalPages == 0)">
        <i class="fas fa-angle-left"></i>
    </button>

    <!-- Always show 5 page numbers, grey out non-existent ones -->
    @for (int i = 1; i <= 5; i++)
    {
        var pageNum = i;
        bool isDisabled = i > TotalPages;
        <button class="page-btn @(pageNum == CurrentPage ? "active" : "") @(isDisabled ? "disabled-number" : "")" 
                @onclick="@(() => OnPageChanged.InvokeAsync(pageNum))"
                disabled="@isDisabled">
            @pageNum
        </button>
    }

    <button class="page-btn" @onclick="OnNextPage" disabled="@(CurrentPage >= TotalPages || TotalPages == 0)">
        <i class="fas fa-angle-right"></i>
    </button>
    <button class="page-btn" @onclick="OnLastPage" disabled="@(CurrentPage >= TotalPages || TotalPages == 0)">
        <i class="fas fa-angle-double-right"></i>
    </button>
</div>

@code {
    [Parameter] public int CurrentPage { get; set; } = 1;
    [Parameter] public int TotalPages { get; set; }
    [Parameter] public EventCallback<int> OnPageChanged { get; set; }

    private async Task OnFirstPage() => await OnPageChanged.InvokeAsync(1);
    private async Task OnPreviousPage() => await OnPageChanged.InvokeAsync(Math.Max(1, CurrentPage - 1));
    private async Task OnNextPage() => await OnPageChanged.InvokeAsync(Math.Min(TotalPages, CurrentPage + 1));
    private async Task OnLastPage() => await OnPageChanged.InvokeAsync(TotalPages);
}