@using _23050370_Suyog_Sigdel.Services
@inherits LayoutComponentBase
@inject ThemeService ThemeService
@using _23050370_Suyog_Sigdel.Services
@inject LockService LockService
@inject NavigationManager Nav

<div class="main-layout @ThemeClass">
    <Navbar />
    <div class="content">
        @Body
    </div>
</div>

@code {
    //For locking the app
    protected override void OnAfterRender(bool firstRender)
    {
        if (LockService.IsLocked && !Nav.Uri.EndsWith("/lock"))
        {
            Nav.NavigateTo("/lock", true);
        }
    }



    private string ThemeClass => ThemeService.IsDark ? "dark" : "light";

    protected override void OnInitialized()
    {
        ThemeService.OnThemeChanged += StateHasChanged;
    }
}